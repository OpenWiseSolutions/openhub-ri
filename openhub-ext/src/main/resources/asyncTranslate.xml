<?xml version="1.0" encoding="UTF-8"?>
<routes id="routes-f4e411c2-8be4-499b-9eae-d9c2ce757e03" xmlns="http://camel.apache.org/schema/spring">
    <route id="asyncTranslateInRoute">
        <from id="_from1" uri="spring-ws://rootqname:(http://openhub-ri.org/ws/TranslateService-v1)asyncTranslateRequest?endpointMapping=%23endpointMapping"/>
        <setHeader headerName="asynchService" id="_setHeader1">
            <simple resultType="org.openhubframework.openhub.ri.ServiceEnum">${type:org.openhubframework.openhub.ri.ServiceEnum.TRANSLATE}</simple>
        </setHeader>
        <setHeader headerName="asynchOperation" id="_setHeader2">
            <constant>asyncTranslateWs</constant>
        </setHeader>
        <log id="_log1" message="Exchange translate ${body}"/>
        <to id="_to1" uri="direct://asynch_in_message_route"/>
        <to id="_to2" uri="direct:my-async-response"/>
    </route>
    <route id="asyncTranslateOutRoute">
        <from id="_from2" uri="direct://TRANSLATE_asyncTranslateWs_out_route"/>
        <log id="_log2" message="Provolala se asynchronnnnne!! a je v ni ${body}"/>
        <unmarshal id="_unmarshal1">
            <jaxb
                contextPath="org.openhubframework.openhub.ri.in.translate.model" partClass="org.openhubframework.openhub.ri.in.translate.model.AsyncTranslateRequest"/>
        </unmarshal>
        <log id="_log3" message="Jdu dozerovat : ${body}"/>
        <to id="_to3" pattern="InOptionalOut" uri="dozer:translate?sourceModel=org.openhubframework.openhub.ri.in.translate.model.AsyncTranslateRequest&amp;targetModel=org.openhubframework.openhub.ri.in.translate.model.SyncTranslateRequest&amp;mappingFile=transformationMapToRequest.xml"/>
        <to id="_to4" uri="extcall:message:direct:callTranslateSync"/>
    </route>
    <route id="my-async-response" shutdownRoute="Default">
        <from id="_from3" uri="direct:my-async-response"/>
        <bean
            beanType="org.openhubframework.openhub.ri.AsyncResponseService"
            id="createAsyncResponse" method="asyncResponse"/>
        <marshal id="_marshal1">
            <jaxb
                contextPath="org.openhubframework.openhub.ri.in.translate.model" partClass="org.openhubframework.openhub.ri.in.translate.model.AsyncTranslateResponse"/>
        </marshal>
    </route>
    <route id="extcallCallExternal">
        <from id="_from4" uri="direct:callTranslateSync"/>
        <marshal id="_marshal2">
            <jaxb
                contextPath="org.openhubframework.openhub.ri.in.translate.model" partClass="org.openhubframework.openhub.ri.in.translate.model.SyncTranslateRequest"/>
        </marshal>
        <to id="toExternal" uri="spring-ws:http://localhost:8080/ws/Translate/v1?messageSender=#selfMessageSender"/>
        <marshal id="_unmarshal12">
            <xmljson/>
        </marshal>
        <to id="httpClientVol" uri="http4://localhost:9999"/>
    </route>
</routes>
